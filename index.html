<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            Wallet App
        </title>
    </head>
    <style>
    .yesil{
        color:green;

    }
    .kirmizi{
        color:red;
    }
    
    </style>
        <body onload="onyukle();">
            <h1 id="appBaslik">Cüzdanım</h1><h1 id="bakiye">000</h1>
            <ul style="overflow:scroll; height:400px; font-size:larger;"></ul>
            <form>
                <input id="item" type="text" placeholder="Miktar Girin">
            </form>
            <button id="eklebutton">Ekle</button>
            <button id="cikarbutton">Çıkar</button>
            <button onclick="sil();">Clear All</button>
            <button onclick="guncelle();">Bakiye Guncelle</button>
        </body>
        <script>
var intBakiye = 0;
var bakiye  = document.getElementById("bakiye");
const form = document.querySelector('form');
const ul = document.querySelector('ul');
const ekleB = document.getElementById("eklebutton");
const cikarB = document.getElementById("cikarbutton");
const input = document.getElementById('item');
var miktar ;
var aciklama ;
let itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : [];
const data = JSON.parse(localStorage.getItem('items'));

var d = new Date();
var dateString = " - "+d.getDay()+"/"+d.getMonth()+"/"+d.getFullYear()+" "+d.getHours()+":"+d.getMinutes();

const liMaker = (text) => {
  const li = document.createElement('li');
  li.textContent = text;
  if(text.includes("+")){
    li.setAttribute("class", "yesil");
  }else
  li.setAttribute("class", "kirmizi");
  
  ul.appendChild(li);
}

ekleB.addEventListener('click', function () {
     miktar = input.value.split(" ");
     aciklama = miktar[1];
    
itemsArray.push("+"+miktar[0]+" "+dateString+" : "+aciklama);
localStorage.setItem('items', JSON.stringify(itemsArray));
liMaker("+"+miktar[0]+" "+dateString+" : "+aciklama);
input.value = "";

intBakiye += Number(miktar[0]);

localStorage.bakiye = intBakiye;

bakiye.innerHTML = JSON.parse(localStorage.bakiye);
});

cikarB.addEventListener('click', function () {
    miktar = input.value.split(" ");
     aciklama = miktar[1];
    
itemsArray.push("-"+miktar[0]+" "+dateString+" : "+aciklama);
localStorage.setItem('items', JSON.stringify(itemsArray));
liMaker("-"+miktar[0]+" "+dateString+" : "+aciklama);
    input.value = "";

    intBakiye -= Number(miktar[0]);

    localStorage.bakiye = intBakiye;

bakiye.innerHTML = JSON.parse(localStorage.bakiye);

    });
    
    data.forEach(item => {
      liMaker(item);
    });

function sil(){
    localStorage.clear();
  while (ul.firstChild) {
    ul.removeChild(ul.firstChild);
}
itemsArray = [];
}

function guncelle(){
    localStorage.bakiye = Number(prompt("Şu an sahip olduğunuz para miktarını giriniz."));
    bakiye.innerHTML = JSON.parse(localStorage.bakiye);
    intBakiye = Number(JSON.parse(localStorage.bakiye));
}

function onyukle(){
    bakiye.innerHTML = JSON.parse(localStorage.bakiye);
    intBakiye = Number(JSON.parse(localStorage.bakiye));
}
 </script>
            
   
</html>